<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />
</head>
<body>


<div id='map' style='width: 100%; height: 600px;'></div>



<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js'></script>
<script src="JS/mapbox-utl.js" ></script>
<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiZWRkeWJhdXRpc3RhIiwiYSI6ImNqemloYWY1czE2dzYzY253M3VydHo4ODkifQ.-V9O-Cx6Aw9zJDBrqDcSXg';

    var token = 'pk.eyJ1IjoiZWRkeWJhdXRpc3RhIiwiYSI6ImNqemloYWY1czE2dzYzY253M3VydHo4ODkifQ.-V9O-Cx6Aw9zJDBrqDcSXg';

    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 13,
        center: [-98.493674, 29.425906]
    });

    geocode("Pinch Boil House",token).then(function(result) {
        console.log(result);
        map.setCenter(result);
        map.setZoom(5);
    });

    var delay = 3000;

    var timeoutId = setTimeout(function () {
        map.jumpTo({zoom: 15,center: [-98.493674, 29.425906]});
        map.setStyle ('mapbox://styles/mapbox/streets-v9');
    }, delay);

    var delay = 6000;
    var timeout = setTimeout(function () {
        map.jumpTo({zoom: 20,center: [-98.493674, 29.425906]});
        map.setStyle ('mapbox://styles/mapbox/streets-v9');
    }, delay);

    var popup = new mapboxgl.Popup()
        .setHTML("<h1>Pinch Boil House</h1>");



    var marker = new mapboxgl.Marker()
        .setLngLat([-98.493674, 29.425906])
        .addTo(map)
        .setPopup(popup);

    marker.togglePopup();

    popup.addTo(map);


    var foodPlace = [{
        name: "Pinch Boil House ",
        location: "124 N Main Ave, San Antonio, TX 78205",
        geo:[-98.493654, 29.426272]
    },
        {
            name: "Burger Boy",
            location: "2323 N St Mary's St, San Antonio, TX 78212",
            geo:[-98.486956, 29.447208]
        },
        {
            name: "la Panderia",
            location: "301 E Houston St, San Antonio, TX 78205",
            geo:[-98.48957, 29.426619]

    }];

    foodPlace.forEach(function (restaurant) {
        geocode(restaurant.location,token).then(function(result) {
            console.log(result);
            map.setCenter(result);
        });
        var popup = new mapboxgl.Popup()
            .setHTML(restaurant.name);



        var marker = new mapboxgl.Marker()
            .setLngLat(restaurant.geo)
            .addTo(map)
            .setPopup(popup);

        marker.togglePopup();

        popup.addTo(map);

    });








</script>
</body>
</html>