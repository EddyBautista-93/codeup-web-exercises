<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>San Antonio Weather</title>

    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <style>
        body{
            margin: auto;
        }
        ul{
            list-style: none;
        }

        #map { top:0;
            bottom:0;
            width: 100%;
            height: 700px; }

    </style>


</head>
<body>
<h1>Weather Application</h1>

<h3>San Antonio</h3>

<div id="container" class="card-deck mb-3 text-center">


</div>

<div>
    <h1>Enter Longitude and Latitude</h1>
    <form>
        <div class="form-group">
            <label for="lat-long"></label>
            <input id="lat-long" type="text" placeholder="Enter Latitude and Longitude">
            <button id="update-lat-long" type="button">Update</button>
        </div>
    </form>

</div>


<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.min.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.1/mapbox-gl-geocoder.css' type='text/css' />
<div id='map'></div>



<script src="JS/jquery-2.2.4.js"></script>
<script src="JS/keys.js"></script>
<script>
    mapboxgl.accessToken = mapboxToken;
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 10,
        center: [-98.4916, 29.4252]
    });


    map.addControl(new MapboxGeocoder({
        accessToken: mapboxgl.accessToken,
        mapboxgl: mapboxgl
    }));
$.get("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+ darkSkyKey +"/29.4241,-98.4936").done(function(days) {

var dayOneData = "";


        for(var i = 0; i < 3; i++){
                    dayOneData+=          '<div class="card" >';
                    dayOneData+=          "<ul>";
                    dayOneData+=           "<li>"+ days.daily.data[i].apparentTemperatureLow +"/" + days.daily.data[i].apparentTemperatureHigh+ "</li>";
                    dayOneData+=           "<img src='" + weatherIcon(iconArray, days.daily.data[i].icon) + "'>";
                    dayOneData+=          " <li>"+"<bold>Weather:</bold>"+ days.daily.data[i].summary + "</li>";
                    dayOneData+=           "<li>"+"<bold>Humidity:</bold>"+ days.daily.data[i].humidity+ "</li>";
                    dayOneData+=           "<li>"+"<bold>Wind:</bold>"+ days.daily.data[i].windSpeed + "</li>";
                    dayOneData+=          " <li>"+"<bold>pressure:</bold>"+ days.daily.data[i].pressure + "</li>";
                    dayOneData+=           "</ul>";
                    dayOneData+=          "</div>";
        }

    $('#container').html(dayOneData)


});


// icon array
var iconArray = [{
    link: "icons/SVG/Sun.svg",
    name: "clear-day"
},
    {
        link: "icons/SVG/Moon-Waxing-Crescent.svg",
        name: "clear-night"
    },
    {
        link: "icons/SVG/Cloud-Rain.svg",
        name: "rain"
    },
    {
        link: "icons/SVG/Cloud-Snow-Sun",
        name: "snow"
    },
    {
        link: "icons/SVG/Cloud-Snow-Alt.svg",
        name: "sleet"
    },
    {
        link: "icons/SVG/Wing.svg",
        name: "wind"
    },
    {
        link: "icons/SVG/Cloud-Fog.svg",
        name: "fog"
    },
    {
        link: "icons/SVG/Cloud-Sun.svg",
        name: "cloudy"
    },
    {
        link: "icons/SVG/Cloud-Sun.svg",
        name: "partly-cloudy-day"
    },
    {
        link: "icons/SVG/CLoud-Moon.svg",
        name: "party-cloudy-night"
}];

// function to change icons
function weatherIcon(icon, apiIcon) {
    for (var i = 0; i < iconArray.length; i++) {
        if (iconArray[i].name === apiIcon) {
            return iconArray[i].link

        }
    }
}

</script>
</body>
</html>